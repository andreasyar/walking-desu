#summary game draft

= 1. Игровой мир =

Игровой мир состоит из двух частей. Первая - квадратная карта поверхности шириной *MAP_WIDTH* пикселей. Вторая - набор подземелий и других зон игрового мира не находящихся на поверхности (набор маленьких независимых карт).

== 1.1 Разбиение карты на фрагменты ==

Как поверхность, так и зоны не находящиеся на поверхности, делятся на квадратные фрагменты шириной *MAP_FRAGM_WIDTH*.

== 1.2 Зона видимости карты ==

В один момент времени игрок видит вокруг себя *MAP_VISIBLE_RANGE* фрагментов карты во всех направлениях. В процессе перемещения игрока по карте, игроку становятся видимы другие фрагменты карты, попадающие в *MAP_VISIBLE_RANGE* и становятся не видимы те, которые больше в него не входят.

== 1.3 Типы местности. Местности ==

Фрагменты карты разбиты на квадратные ячейки шириной *MAP_FRAGM_CELL_WIDTH*. Каждой ячейке соответствует один из следующих типов местности: вода, трава, земля, лес, гора. Существует несколько наборов спрайтов для разных местностей (местность покрытая снегом, пустынная местность). В каждом таком наборе спрайтов есть спрайты для каждого типа местности и, если нужно чтобы переходы между различными типами местности выглядели красиво, то в наборе спрайтов должны быть спрайты для ячеек, лежащих на границе разных типов местности. Также, если нужно чтобы переход между разными местностями выглядел красиво, в наборе спрайтов должны быть спрайты для ячеек, лежащих на границе разных местностей.

== 1.4 Геодата ==

Геодата - это собирательное название для механизма, который позволяет воздействовать на игрока, если он находится в какой-то специально выделенной области игрового мира. Термин позаимствован из _Lieage 2_ и отчасти наполнен новым смыслом. В основе геодаты лежат выделенные области игрового мира, при попадании в которые игрока срабатывает триггер, который закреплён за данной выделенной областью. Например, ячейки фрагмента карты, которые имеют тип вода, выделены областью, при попадании в которую игрока срабатывает триггер, который не даёт игроку попасть в эту область. Спрайт телепорта на карте выделен областью, при попадании в которую игрока срабатывает триггер, мгновенно перемещающий игрока в некую точку игрового мира. Спрайты лавы (тип местности земля) местности лавовый поток выделены областью, при попадании в которую игрока срабатывает триггер, который уменьшает здоровье игрока и снижает его скорость передвижения. Области имеют вид многоугольника.

== 1.5 Особые области игрового мира (продолжение 1.4) ==

Изначально существует несколько разновидностей особых областей игрового мира, вернее триггеров, закреплённых за ними:
  * область, в которую нельзя попасть,
  * область, при попадании в которую мгновенно или периодически изменяются атрибуты игрока.
В процессе разработки могут добавиться другие разновидности особых областей, которые смогут влиять не только на игрока, попавшего в них.

== 1.6 Автоматическое создание местности ==

Подразумевается, что *MAP_WIDTH* из пункта 1.1 достаточно большая, чтобы нарисовать руками весь игровой мир было практически невозможно. Поэтому в игровом мире будут как созданные вручную, так и автоматически созданные фрагменты карты. Более того, фрагменты карты будут создаваться и сохраняться на сервере на лету по мере того, как игроки будут исследовать новые и новые территории. Для создания местности выбирается некая квадратная область на карте, которую необходимо создать и генерируется случайный ландшафт. Создаваемая область должна быть кратна целому числу фрагментов карты. Естественно, условием запуска создания фрагмента карты служит попадание ещё не созданного фрагмента карты в зону видимости игроку. Если по какой-то причине в зону видимости карты у игрока попал фрагмент, который не был создан или он в процессе создания, то вместо него отображается местность типа земля той местности, в которой игрок находится и этот фрагмент карты временно объявляется особой областью карты в которую нельзя попасть.

== 1.7 Координаты и расположение объектов в игровом мире ==

Под объектами понимаются любые сущности, которые располагаются на карте и имеют координаты: игрок, предмет, особая область. У каждого объекта есть особая точка, которая привязывает его к карте, координаты этой точки являются координатами этого объекта на карте. Координаты задаются в пикселах. При загрузке спрайтов объекта (если объект может быть нарисован и для этого имеется набор из одного или более спрайтов) для каждого спрайта указывается, в каком месте спрайта должна находится особая точка объекта. Например, если у нас есть игрок, для которого существует набор спрайтов человека, то логично, чтобы особая точка игрока, задающая его координаты на карте, всегда была совмещена с точкой, которая образуется проекцией центра тяжести нарисованных спрайтов человека на воображаемую плоскость, на которой он стоит, чтобы при движении и другой анимации, которую могут задавать спрайты человека, они выглядели естественно.

= 2. Игрок =

Игрок это персонаж, которым управляет человек, играющий в бродячую десу.

== 2.1 Характеристики игрока ==

У игрока есть три характеристики: сила, скорость и здоровье. Сила - это повреждения, наносимые игроком другим объектам игрового мира, если эти объекты допускают нанесение урона им. Сила измеряется в неких единицах силы. Скорость - скорость передвижения игрока по карте. Скорость измеряется в пикселах в секунду. Здоровье игрока - количество повреждений, которые игрок может выдержать прежде чем умрёт, когда его текущий уровень здоровья станет меньше либо равен 0. Здоровье измеряется в неких единицах здоровья.

== 2.2 Зона видимости игрока ==

У каждого игрока есть зона видимости радиуса *PLAYER_VISIBLE_RANGE* внутри которой он видит других игроков и их действия в реальном времени. Радиус задаётся в пикселах. Эта зона видимости меньше чем и целиком помещается во фрагменты карты, заданные *MAP_VISIBLE_RANGE* из пункта 1.2. Если игрок выходит за зону видимости другого игрока, то им обоим перестают передаваться данные друг о друге - они друг друга перестают видеть. Зона видимости подобрана так, чтобы она с запасом выходила за границу разрешения экранов большинства современных мониторов. В будущем радиус видимости игрока может увеличится. Радиус видимости игрока одинаков для всех игроков.